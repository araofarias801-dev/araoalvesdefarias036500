CREATE TABLE artista (
	id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	nome VARCHAR(200) NOT NULL,
	criado_em TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE UNIQUE INDEX ux_artista_nome ON artista (nome);

CREATE TABLE album (
	id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	titulo VARCHAR(200) NOT NULL,
	criado_em TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX ix_album_titulo ON album (titulo);

CREATE TABLE artista_album (
	artista_id BIGINT NOT NULL,
	album_id BIGINT NOT NULL,
	criado_em TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
	PRIMARY KEY (artista_id, album_id),
	CONSTRAINT fk_artista_album_artista FOREIGN KEY (artista_id) REFERENCES artista (id),
	CONSTRAINT fk_artista_album_album FOREIGN KEY (album_id) REFERENCES album (id)
);
